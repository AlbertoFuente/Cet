function prepareGraphData(e,a,t){function n(e){var a=document.createElement("label");a.className="errLabel",a.innerHTML="Impossible to construct a graph of the selected data, try another selection.",e.appendChild(a),setTimeout(function(){e.removeChild(a)},5e3)}var l=(a.type,a.xAxis),o=a.yAxis,r=e.tableData[0].head,i=e.tableData[0].body,s=null,c=null,d=[],u=[],m={};$.each(r,function(e,a){a===l&&(s=e.slice(-1)),a===o&&(c=e.slice(-1))}),$.each(i,function(e,a){$.each(a,function(e,a){var t="td"+s,n="td"+c;t===e&&d.push(a.data),n===e&&u.push(a.data)})}),d.length>0&&d.length===u.length&&(m.sameLength=!0);var p=0,h=0,f=/^\d+$/;for(p;p<d.length;p++){if(!f.test(d[p])){m.xAxisIsNum=!1;break}m.xAxisIsNum=!0}for(h;h<u.length;h++){if(!f.test(u[h])){m.yAxisIsNum=!1;break}m.yAxisIsNum=!0}m.sameLength&&(m.xAxisIsNum!==m.yAxisIsNum?console.log("OOOOKKK"):n(t))}function closeModal(e){e.style.display="none"}function openModal(e,a){var t=document.createElement("div");t.id="_cetTableModal";var n=document.createElement("div");n.className="_cetTableModalHeader";var l=document.createElement("label"),o=document.createElement("button");o.className="closeButton mdi-content-clear",o.onclick=function(){closeModal(t)};var r=document.createElement("div");switch(r.className="_cetTableContent",e){case"graph":l.innerHTML="Config graph options";var i=document.createElement("label");i.className="selectTypeLabel",i.innerHTML="Select graph type: ",r.appendChild(i);var s=document.createElement("select");s.className="browser-default";var c=["Bar chart","Line chart","Pie chart","Scatter chart"],d=[],u=0,m=0,p=0;for(u;u<c.length;u++){var h=document.createElement("option");h.value=c[u],h.innerHTML=c[u],s.appendChild(h)}r.appendChild(s);var f=document.createElement("label");f.className="selectXaxisLabel",f.innerHTML="Select X axis: ",r.appendChild(f);var v=document.createElement("select");v.className="browser-default";var b=a.tableData[0].head;for($.each(b,function(e,a){d.push(a)}),m;m<d.length;m++){var g=document.createElement("option");g.value=d[m],g.innerHTML=d[m],v.appendChild(g)}r.appendChild(v);var N=document.createElement("label");N.className="selectYaxisLabel",N.innerHTML="Select Y axis: ",r.appendChild(N);var y=document.createElement("select");for(y.className="browser-default",p;p<d.length;p++){var E=document.createElement("option");E.value=d[p],E.innerHTML=d[p],y.appendChild(E)}r.appendChild(y);var C=document.createElement("a");C.className="doneButton waves-effect waves-light btn",C.innerHTML="DONE",r.appendChild(C),C.onclick=function(){var e={};e.xAxis=v.value,e.yAxis=y.value,e.type=s.value,prepareGraphData(a,e,r)}}n.appendChild(o),n.appendChild(l),t.appendChild(n),t.appendChild(r),document.body.appendChild(t)}function closeMenu(e,a){e.style.display="none";var t=a.childNodes[0];t.className="normalButton mdi-navigation-menu"}function listTableOptions(e,a,t){var n=null,l=document.createElement("u");if(l.className="optionsList",e.listOptions.graphs){n="graph";var o=document.createElement("li");o.className="optionsLi";var r=document.createElement("label");r.innerHTML="Show Graph Panel",o.appendChild(r),l.appendChild(o),o.onclick=function(){openModal(n,e),closeMenu(a,t)}}a.appendChild(l)}function getLocalData(e,a){void 0!==e&&(localStorage.getItem("_tableData")?(e.tableData=JSON.parse(localStorage.getItem("_tableData")),a.tableConstructor(e)):$.ajax({url:e.localDataUrl,method:"GET",dataType:"json",success:function(t){void 0!==t&&(e.tableData=t,a.tableConstructor(e))},error:function(){throw new Error("Could not load the data inside the "+e.localDataUrl+" file")}}))}function fireBaseData(e,a){if(void 0!==e){var t=new Firebase(e.fireBaseUrl);t.on("value",function(t){e.tableData=t.val(),a.tableConstructor(e)},function(e){throw new Error("The read failed: "+e.code)})}}function apiRestData(){}function createTable(e){var a=this;this.modifyData=function(a,t,n,l){switch(e.tableData[0].body[a][t].data=n,l){case 1:if(!window.localStorage)throw new Error("Your browser don't support LocalStorage!");localStorage.setItem("_tableData",JSON.stringify(e.tableData));break;case 2:if(""!==e.fireBaseUrl){var o=new Firebase(e.fireBaseUrl);o.set(e.tableData)}break;case 3:}},this.printNewBody=function(e,a,t){var n=t.childNodes[1],l=[],o=0;for($(n).empty(),o;o<e.length;o++)for(var r=0;r<a.length;r++)e[o]===a[r].value&&l.push(a[r].tr);$(n).append(l)},this.mouseEffects=function(e,a){var t=e.parentNode.parentNode.className,n=e.parentNode.className;tableEffects(t,n,a)},this.inputChange=function(t){var n=t.parentNode.className,l=t.value,o=t.parentNode.parentNode.className;a.modifyData(o,n,l,e.mode)},this.tableConstructor=function(e){if(void 0!==e){if(e.header){var t=document.createElement("div");t.className="tableHeader";var n=document.createElement("label");if(n.className="tableHeaderTitle",n.innerHTML=e.title,e.options){var l=document.createElement("button");l.className="normalButton mdi-navigation-menu",t.appendChild(l);var o=document.createElement("div");o.className="optionsContainer",o.style.display="none",void 0!==e.listOptions&&"object"==typeof e.listOptions&&listTableOptions(e,o,t),l.onclick=function(){var e=this.getBoundingClientRect();o.style.top=e.top+38+"px",o.style.left=e.left-164+"px","normalButton mdi-navigation-menu"===this.className?(this.className="clickedButton mdi-navigation-menu",o.style.display="block"):(this.className="normalButton mdi-navigation-menu",o.style.display="none")}}t.appendChild(n),e.container.appendChild(t),document.body.appendChild(o)}if(1===e.container.childNodes.length){var r=document.createElement("table");r.id="cetTable",r.className="striped";var i=document.createElement("tHead"),s=e.tableData.head||e.tableData[0].head;$.each(s,function(a,t){var n=document.createElement("th");if(n.className=a,n.innerHTML=t,n.setAttribute("data-field",t),e.sortable){var l=document.createElement("i");l.className="mdi-hardware-keyboard-arrow-down sortIcon",n.appendChild(l)}i.appendChild(n)}),r.appendChild(i);var c=document.createElement("tBody"),d=e.tableData.body||e.tableData[0].body;$.each(d,function(e,a){var t=document.createElement("tr");t.className=e,$.each(a,function(e,a){var n=document.createElement("td");if(n.className=e,void 0!==a.data&&void 0!==a.type){var l=document.createElement("input");l.className="input_"+e,"date"===a.type?($(l).addClass("datepicker picker__input"),l.type="text",l.value=a.data,l.setAttribute("placeholder",a.data)):(l.type=a.type,l.value=a.data),a.edit||l.setAttribute("disabled","disabled"),n.appendChild(l)}t.appendChild(n)}),c.appendChild(t)}),r.appendChild(c),e.container.appendChild(r);var u=r.getElementsByTagName("input"),m=r.getElementsByTagName("i");return $(u).change(function(){a.inputChange(this)}),$(u).hover(function(){a.mouseEffects(this,"hover")}),$(u).mouseout(function(){a.mouseEffects(this,"out")}),$(m).click(function(){var e=this.parentNode.className,t=e.slice(-1),n="td"+t,l="sort",o="mdi-hardware-keyboard-arrow-down sortIcon",i="mdi-hardware-keyboard-arrow-up sortIcon",s=r.getElementsByTagName("i"),c=0,d="down";if(this.className===o)for(c;c<s.length;c++)s[c].className=i,d="up";else for(c;c<s.length;c++)s[c].className=o,d="down";tableEffects(e,n,l,r,d,a)}),$(".datepicker").pickadate(),e.container}return!1}},void 0!==e&&(e.dataOptions.localData?""!==e.localDataUrl?(e.mode=1,getLocalData(e,a)):alert("You must add _cetTable.localDataUrl in config.js"):e.dataOptions.fireBase?""!==e.fireBaseUrl?(e.mode=2,fireBaseData(e,a)):alert("You must add _cetTable.fireBaseUrl in config.js"):e.dataOptions.apiRest&&(""!==e.apiRestUrl?(e.mode=3,apiRestData(e.apiRestUrl)):alert("You must add _cetTable.apiRestUrl in config.js")))}function tableEffects(e,a,t,n,l,o){var r=$("."+e),i=$("."+a),s=a.slice(-1),c=$(".th"+s);switch(t){case"hover":r.attr("style","background: rgba(15, 151, 249, 0.21)"),i.attr("style","background: rgba(15, 151, 249, 0.21)"),c.attr("style","background: rgb(15, 151, 249); color: white");break;case"out":r.removeAttr("style"),i.removeAttr("style"),c.removeAttr("style");break;case"sort":var d=n.getElementsByClassName(a),u=0,m=[],p=[],h=/^\d+$/,f=!1;for(u;u<d.length;u++)f=!!h.test(d[u].childNodes[0].value),m.push({tr:d[u].parentNode,value:d[u].childNodes[0].value}),p.push(d[u].childNodes[0].value);"down"===l?(f?p.sort(function(e,a){return e-a}):p.reverse(),o.printNewBody(p,m,n)):(f?p.sort(function(e,a){return a-e}):p.sort(),o.printNewBody(p,m,n));var v=n.getElementsByTagName("input");$(v).change(function(){o.inputChange(this)}),$(v).hover(function(){o.mouseEffects(this,"hover")}),$(v).mouseout(function(){o.mouseEffects(this,"out")}),$(".datepicker").pickadate()}}var imported=document.createElement("script");imported.src="../config/config.js",document.head.appendChild(imported);